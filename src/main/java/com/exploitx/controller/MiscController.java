package com.exploitx.controller;

import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Node;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.VBox;
import org.apache.log4j.Logger;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

// OA页面相关逻辑
public class MiscController{

    @FXML
    private VBox selectMiscButton;      // 漏洞种类按钮
    @FXML
    private AnchorPane misc_content;     // 按钮对应的功能

    public static Map<String, Object> history = new HashMap<String, Object>();

    public static  Logger logger = Logger.getLogger(MainController.class);
    // 加载
    @FXML
    public void initialize() {

        // lambda 表达式获取 drawer 中的按钮，切换界面
        for (Node node: selectMiscButton.getChildren()){
            if (node.getAccessibleText() != null){
                node.addEventHandler(MouseEvent.MOUSE_CLICKED, (e) -> {
                    refreshPage(node.getAccessibleText());
                });
            }
        }
        refreshPage("Decrypt");
    }

    private void refreshPage(String page){
        try {
            this.misc_content.getChildren().clear();
            AnchorPane contentPage = FXMLLoader.load(getClass().getClassLoader().getResource("fxml/misc/" + page + ".fxml"));

            this.misc_content.getChildren().add(contentPage);
        } catch (IOException e) {
            logger.debug(e);
        }
    }


}